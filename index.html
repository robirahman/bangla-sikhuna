<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#1a1a2e">
<link rel="manifest" href="manifest.json">
<title>à¦¬à¦¾à¦‚à¦²à¦¾ à¦¶à¦¿à¦•à§à¦·à¦¾ â€” Learn Bengali</title>
<link rel="stylesheet" href="styles.css">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

<!-- PROFILE SELECTION SCREEN -->
<div class="profile-screen" id="profile-screen">
  <a href="https://robirahman.com" class="back-to-site">â† robirahman.com</a>
  <h1><span>à¦¬à¦¾à¦‚à¦²à¦¾</span> à¦¶à¦¿à¦•à§à¦·à¦¾</h1>
  <p class="profile-subtitle" data-t="Choose your profile">Choose your profile</p>
  <div class="profile-list" id="profile-list"></div>
  <div class="profile-input-wrap" id="profile-input-wrap">
    <input class="profile-input" id="profile-name-input" type="text" placeholder="Enter your name" maxlength="30" autocomplete="off">
    <input class="profile-input" id="profile-pw-input" type="password" placeholder="Set a password (optional)" maxlength="50" autocomplete="new-password">
    <div class="profile-input-actions">
      <button class="btn-primary" id="profile-create-btn" data-action="create-profile" aria-label="Create profile and start learning">Start</button>
      <button class="btn-cancel" id="profile-cancel-btn" data-action="cancel-new-profile" aria-label="Cancel profile creation">Cancel</button>
    </div>
  </div>
</div>

<nav id="main-nav" style="display:none">
  <div style="display:flex;align-items:center;gap:20px;">
    <a href="https://robirahman.com" class="back-to-site-nav">â† robirahman.com</a>
    <h1><span>à¦¬à¦¾à¦‚à¦²à¦¾</span> à¦¶à¦¿à¦•à§à¦·à¦¾</h1>
  </div>
  <div class="nav-stats">
    <div class="stat-item"><span class="icon">ğŸ”¥</span><span id="streak-count">0</span></div>
    <div class="stat-item">
      <span class="icon">â­</span><span id="xp-count">0</span> <span data-t="XP">XP</span>
    </div>
    <div class="streak-bar"><div class="streak-fill" id="streak-bar-fill" style="width:0%"></div></div>
    <button class="nav-settings-btn" id="nav-help-btn" data-action="open-help" aria-label="Help" style="font-size:0.85rem;font-weight:700">?</button>
    <button class="nav-settings-btn" id="nav-settings-btn" data-action="open-settings" aria-label="Settings">âš™ï¸</button>
    <button class="nav-theme-btn" id="nav-theme-btn" data-action="toggle-theme" aria-label="Toggle theme">â˜€ï¸</button>
    <button class="nav-search-btn" data-action="open-search" aria-label="Search">ğŸ”</button>
  </div>
</nav>

<div class="tab-bar" id="tab-bar" role="tablist" aria-label="Module navigation" style="display:none">
  <button class="tab-btn active" id="tab-today" data-action="switch-tab" data-tab="today"><span data-t="Today">Today</span><span class="tab-review-badge" id="today-tab-badge" style="display:none"></span></button>
  <button class="tab-btn" data-action="switch-tab" data-tab="alphabet" data-t="Alphabet">Alphabet</button>
  <button class="tab-btn" data-action="switch-tab" data-tab="numbers" data-t="Numbers">Numbers</button>
  <button class="tab-btn" data-action="switch-tab" data-tab="vocabulary" data-t="Vocabulary">Vocabulary</button>
  <button class="tab-btn" data-action="switch-tab" data-tab="grammar" data-t="Grammar">Grammar</button>
  <button class="tab-btn" data-action="switch-tab" data-tab="phrases" data-t="Phrases">Phrases</button>

  <div class="tab-dropdown">
    <button class="tab-dropdown-toggle" data-action="toggle-tab-group" data-group="culture"><span data-t="Culture">Culture</span> <span class="tab-dd-arrow">â–¾</span></button>
    <div class="tab-dropdown-menu" id="tab-group-culture">
      <button class="tab-btn" data-action="switch-tab" data-tab="music" data-t="Music">Music</button>
      <button class="tab-btn" data-action="switch-tab" data-tab="movies" data-t="Movies">Movies</button>
      <button class="tab-btn" data-action="switch-tab" data-tab="poetry" data-t="Poetry">Poetry</button>
      <button class="tab-btn" data-action="switch-tab" data-tab="folktales" data-t="Folk Tales">Folk Tales</button>
      <button class="tab-btn" data-action="switch-tab" data-tab="proverbs" data-t="Proverbs">Proverbs</button>
    </div>
  </div>

  <div class="tab-dropdown">
    <button class="tab-dropdown-toggle" data-action="toggle-tab-group" data-group="explore"><span data-t="Explore">Explore</span> <span class="tab-dd-arrow">â–¾</span></button>
    <div class="tab-dropdown-menu" id="tab-group-explore">
      <button class="tab-btn" data-action="switch-tab" data-tab="sports" data-t="Sports">Sports</button>
      <button class="tab-btn" data-action="switch-tab" data-tab="recipes" data-t="Recipes">Recipes</button>
      <button class="tab-btn" data-action="switch-tab" data-tab="festivals" data-t="Festivals">Festivals</button>
      <button class="tab-btn" data-action="switch-tab" data-tab="history" data-t="History">History</button>
      <button class="tab-btn" data-action="switch-tab" data-tab="travel" data-t="Travel">Travel</button>
      <button class="tab-btn" data-action="switch-tab" data-tab="trivia" data-t="Trivia">Trivia</button>
      <button class="tab-btn" data-action="switch-tab" data-tab="conversations" data-t="Conversations">Conversations</button>
    </div>
  </div>

  <button class="pt-retake-btn" id="pt-retake-btn" style="display:none" data-action="start-placement-test" data-t="Retake Placement">Retake Placement</button>
  <button class="review-due-btn" id="review-due-btn" style="display:none" data-action="start-review-session">ğŸ”” <span data-t="Review Due">Review Due</span> (<span id="review-due-count">0</span>)</button>
</div>

<div id="guest-banner" class="guest-banner" style="display:none">
  <span data-t="Create a profile to save your progress">Create a profile to save your progress</span>
  <button data-action="show-profile-screen" class="guest-banner-btn" data-t="Create Profile">Create Profile</button>
</div>

<!-- SETTINGS PANEL -->
<div class="settings-overlay" id="settings-overlay">
  <div class="settings-panel" id="settings-panel">
    <div class="settings-panel-hdr">
      <div>
        <div class="pmh-name" id="pmh-name"></div>
        <div class="pmh-stats" id="pmh-stats">
          <span>â­ 0 XP</span><span>ğŸ”¥ 0</span><span>ğŸ… 0</span>
        </div>
      </div>
      <button class="settings-close-btn" data-action="close-settings">âœ•</button>
    </div>
    <button data-action="open-progress"><span class="pm-icon">ğŸ“Š</span>Adjust Progress</button>
    <button data-action="open-stats"><span class="pm-icon">ğŸ“ˆ</span>Statistics</button>
    <button data-action="settings-start-placement"><span class="pm-icon">ğŸ¯</span>Retake Placement Test</button>
    <div class="settings-divider"></div>
    <div class="settings-section-label">FIB Answer Mode</div>
    <div class="settings-mode-group">
      <button class="mode-chip" id="fibmode-latin" data-action="set-fib-mode" data-mode="latin">Romanized</button>
      <button class="mode-chip" id="fibmode-mixed" data-action="set-fib-mode" data-mode="mixed">Latin or à¦¬à¦¾à¦‚à¦²à¦¾</button>
      <button class="mode-chip" id="fibmode-bengali" data-action="set-fib-mode" data-mode="bengali">à¦¬à¦¾à¦‚à¦²à¦¾ only</button>
    </div>
    <div class="settings-section-label">Quiz Modality</div>
    <div class="settings-mode-group">
      <button class="mode-chip" id="listenmode-text" data-action="set-listening-mode" data-mode="text">Text only</button>
      <button class="mode-chip" id="listenmode-mixed" data-action="set-listening-mode" data-mode="mixed">Text + Audio</button>
      <button class="mode-chip" id="listenmode-listening" data-action="set-listening-mode" data-mode="listening">Audio only</button>
    </div>
    <div class="settings-section-label">Display Mode</div>
    <div class="settings-mode-group">
      <button class="mode-chip" id="dispmode-standard" data-action="set-display-mode" data-mode="standard">Standard</button>
      <button class="mode-chip" id="dispmode-romanized" data-action="set-display-mode" data-mode="romanized">Romanized</button>
      <button class="mode-chip" id="dispmode-immersion" data-action="set-display-mode" data-mode="immersion">à¦¨à¦¿à¦®à¦œà§à¦œà¦¨ (Immersion)</button>
    </div>
    <div id="hide-english-row" style="display:none">
      <button class="settings-toggle-btn" data-action="toggle-hide-english" id="settings-hide-english-btn">ğŸ™ˆ Hide English meanings: <span id="hide-english-status">Off</span></button>
    </div>
    <details class="settings-collapsible" id="voice-settings">
      <summary class="settings-section-label settings-collapsible-hdr">Voice</summary>
      <div style="padding:8px 18px 12px">
        <select id="voice-select" style="width:100%;padding:6px 8px;background:var(--card-hover);color:var(--text);border:1px solid rgba(255,255,255,0.12);border-radius:8px;font-size:0.88rem;margin-bottom:8px" onchange="setPreferredVoice(this.value)">
          <option value="">System default (Bengali)</option>
        </select>
        <button data-action="speak" data-text="à¦†à¦®à¦¿ à¦¬à¦¾à¦‚à¦²à¦¾ à¦¶à¦¿à¦–à¦›à¦¿" style="font-size:0.84rem;padding:6px 14px;background:var(--card-hover)"><span class="pm-icon">ğŸ”Š</span>Test voice</button>
      </div>
    </details>
    <details class="settings-collapsible">
      <summary class="settings-section-label settings-collapsible-hdr">Theme</summary>
      <div class="settings-theme-swatches" id="theme-swatches">
        <button class="theme-swatch" data-palette="sundarbans" data-action="set-theme" style="--swatch-color:#3ec97a"><span class="swatch-dot"></span><span class="swatch-emoji">ğŸŒ¿</span><span class="swatch-name">Sundarbans</span></button>
        <button class="theme-swatch" data-palette="padma"      data-action="set-theme"      style="--swatch-color:#4a9eff"><span class="swatch-dot"></span><span class="swatch-emoji">ğŸŒŠ</span><span class="swatch-name">Padma River</span></button>
        <button class="theme-swatch" data-palette="mustard"    data-action="set-theme"    style="--swatch-color:#e8c030"><span class="swatch-dot"></span><span class="swatch-emoji">ğŸŒ»</span><span class="swatch-name">Mustard Fields</span></button>
        <button class="theme-swatch" data-palette="terracotta" data-action="set-theme" style="--swatch-color:#e87040"><span class="swatch-dot"></span><span class="swatch-emoji">ğŸº</span><span class="swatch-name">Terracotta</span></button>
        <button class="theme-swatch" data-palette="bengal"     data-action="set-theme"     style="--swatch-color:#38b4d8"><span class="swatch-dot"></span><span class="swatch-emoji">ğŸŸ</span><span class="swatch-name">Bay of Bengal</span></button>
        <button class="theme-swatch" data-palette="kantha"     data-action="set-theme"     style="--swatch-color:#c058c8"><span class="swatch-dot"></span><span class="swatch-emoji">ğŸ§µ</span><span class="swatch-name">Nakshi Kantha</span></button>
        <button class="theme-swatch" data-palette="tiger"      data-action="set-theme"      style="--swatch-color:#e89218"><span class="swatch-dot"></span><span class="swatch-emoji">ğŸ¯</span><span class="swatch-name">Royal Bengal Tiger</span></button>
        <button class="theme-swatch" data-palette="boishakh"   data-action="set-theme"   style="--swatch-color:#e83030"><span class="swatch-dot"></span><span class="swatch-emoji">ğŸŒº</span><span class="swatch-name">Pohela Boishakh</span></button>
        <button class="theme-swatch" data-palette="muslin"     data-action="set-theme"     style="--swatch-color:#a8c8e8"><span class="swatch-dot"></span><span class="swatch-emoji">ğŸª¡</span><span class="swatch-name">Dhaka Muslin</span></button>
        <button class="theme-swatch" data-palette="nouka"      data-action="set-theme"      style="--swatch-color:#00c8b0"><span class="swatch-dot"></span><span class="swatch-emoji">ğŸš£</span><span class="swatch-name">Nouka Baich</span></button>
        <button class="theme-swatch" data-palette="ruposhi"    data-action="set-theme"    style="--swatch-color:#78c840"><span class="swatch-dot"></span><span class="swatch-emoji">ğŸŒ¾</span><span class="swatch-name">Ruposhi Bangla</span></button>
      </div>
    </details>
    <div class="settings-divider"></div>
    <button data-action="switch-profile"><span class="pm-icon">ğŸ”„</span>Switch Profile</button>
    <details class="settings-collapsible">
      <summary class="settings-section-label settings-collapsible-hdr">Advanced</summary>
      <button class="settings-toggle-btn" data-action="toggle-slow-audio" id="settings-slow-audio-btn">ğŸ¢ Slow Audio: <span id="slow-audio-status">Off</span></button>
      <button data-action="manage-profile-pw"><span class="pm-icon">ğŸ”’</span><span id="pw-btn-label">Set Password</span></button>
      <button data-action="import-progress"><span class="pm-icon">â¬†</span>Import Progress</button>
      <button data-action="export-progress"><span class="pm-icon">â¬‡</span>Export Progress</button>
      <div class="settings-divider"></div>
      <button class="danger" data-action="delete-current-profile"><span class="pm-icon">ğŸ—‘</span>Delete Profile</button>
      <div class="settings-divider"></div>
      <button data-action="unlock-all"><span class="pm-icon">ğŸ”“</span>Unlock All &amp; Mark Mastered</button>
    </details>
  </div>
</div>

<!-- HELP PANEL -->
<div class="help-overlay" id="help-overlay">
  <div class="help-panel">
    <div class="settings-panel-hdr">
      <div style="font-weight:600;font-size:1rem">How to Use</div>
      <button class="settings-close-btn" data-action="close-help">âœ•</button>
    </div>

    <div class="settings-section-label">Mastery Levels</div>
    <div style="padding:8px 18px 14px;font-size:0.87rem;line-height:1.8;color:var(--text-dim)">
      <div>â¬œ <strong style="color:var(--text)">Level 0</strong> â€” Not yet seen</div>
      <div>ğŸ”´ <strong style="color:var(--text)">Level 1</strong> â€” Just introduced</div>
      <div>ğŸŸ¡ <strong style="color:var(--text)">Level 2</strong> â€” Still learning</div>
      <div>ğŸŸ¢ <strong style="color:var(--text)">Level 3</strong> â€” Mastered (reviewed after 7 days)</div>
      <div>â­ <strong style="color:var(--text)">Level 4</strong> â€” Well-known (reviewed after 30 days)</div>
      <div style="margin-top:8px;font-size:0.81rem">Answer correctly to level up; answer wrong to drop back. Mastered items are scheduled for spaced-repetition review.</div>
    </div>

    <div class="settings-divider"></div>
    <div class="settings-section-label">Romanization Guide</div>
    <div style="padding:8px 18px 14px;font-size:0.85rem;line-height:1.9;color:var(--text-dim)">
      <table style="border-collapse:collapse;width:100%">
        <tr><td style="padding-right:10px;font-family:monospace;color:var(--text)">Ã´ / o</td><td>à¦… â€” like "o" in <em>hot</em></td></tr>
        <tr><td style="font-family:monospace;color:var(--text)">a</td><td>à¦† â€” like "a" in <em>father</em></td></tr>
        <tr><td style="font-family:monospace;color:var(--text)">i / ii</td><td>à¦‡ / à¦ˆ â€” short / long "ee"</td></tr>
        <tr><td style="font-family:monospace;color:var(--text)">u / uu</td><td>à¦‰ / à¦Š â€” short / long "oo"</td></tr>
        <tr><td style="font-family:monospace;color:var(--text)">e</td><td>à¦ â€” like "ay" in <em>say</em></td></tr>
        <tr><td style="font-family:monospace;color:var(--text)">oi</td><td>à¦ â€” like "oy" in <em>boy</em></td></tr>
        <tr><td style="font-family:monospace;color:var(--text)">sh</td><td>à¦¶ / à¦· â€” like "sh" in <em>she</em></td></tr>
        <tr><td style="font-family:monospace;color:var(--text)">kh / gh</td><td>à¦– / à¦˜ â€” aspirated k / g</td></tr>
        <tr><td style="font-family:monospace;color:var(--text)">chh / jh</td><td>à¦› / à¦ â€” aspirated ch / j</td></tr>
        <tr><td style="font-family:monospace;color:var(--text)">á¹­ / á¸ / á¹›</td><td>à¦Ÿ / à¦¡ / à¦¡à¦¼ â€” retroflex sounds</td></tr>
        <tr><td style="font-family:monospace;color:var(--text)">~ / nÌ</td><td>à¦ â€” nasalizes the vowel</td></tr>
      </table>
      <div style="margin-top:10px;padding:8px 10px;background:rgba(255,255,255,0.04);border-radius:8px;font-size:0.82rem;line-height:1.6">
        <strong style="color:var(--text)">Note on à¦¸à§‡:</strong> Throughout this app, à¦¸à§‡ is romanized as <em>"she"</em> â€” but it means <strong>he, she, or they</strong> (third-person singular, informal). It is <em>not</em> the English feminine pronoun. The romanization reflects the Bengali pronunciation /Êƒe/.
      </div>
    </div>

    <div class="settings-divider"></div>
    <div class="settings-section-label">Keyboard Shortcuts</div>
    <div style="padding:8px 18px 14px;font-size:0.87rem;line-height:1.9;color:var(--text-dim)">
      <div><kbd>1</kbd> <kbd>2</kbd> <kbd>3</kbd> <kbd>4</kbd> â€” select a multiple-choice answer</div>
      <div><kbd>0</kbd> â€” "I don't know"</div>
      <div><kbd>Enter</kbd> â€” submit fill-in-the-blank answer</div>
      <div><kbd>Esc</kbd> â€” close panels / go back</div>
    </div>

    <div class="settings-divider"></div>
    <div class="settings-section-label">About This App</div>
    <div style="padding:8px 18px 14px;font-size:0.83rem;line-height:1.7;color:var(--text-dim)">
      This app teaches <strong style="color:var(--text)">Standard Bangladeshi Bengali</strong> (Dhaka dialect), the prestige variety spoken in Bangladesh and used in formal media. West Bengal Bengali (Kolkata) shares the same script and core grammar but differs in some vocabulary, verb forms, and pronunciation â€” for example, the Bangladeshi present continuous suffix <em>-à¦šà§à¦›</em> vs. the West Bengali <em>-à¦›</em>. Most learners will find the differences minor at the beginner level.
    </div>

    <div class="settings-divider"></div>
    <div style="padding:12px 18px 16px;text-align:center">
      <a href="/bangla-sikhuna/guide.html" target="_blank"
         style="color:var(--accent);font-size:0.88rem;text-decoration:none">
        ğŸ“– Full user guide â†’
      </a>
    </div>
  </div>
</div>

<!-- PLACEMENT TEST: INTRO -->
<div class="screen" id="placement-intro" style="position:relative;">
  <button data-action="dismiss-error" aria-label="Dismiss" class="pt-dismiss-btn">âœ•</button>
  <div style="text-align:center;padding:40px 0 20px;">
    <div style="font-size:3rem;margin-bottom:16px;">ğŸ¯</div>
    <h2 style="font-size:1.6rem;margin-bottom:8px;">Placement Test</h2>
    <p style="color:var(--text-dim);max-width:500px;margin:0 auto 20px;line-height:1.6;">
      Already know some Bengali? Take this quick test to skip ahead.<br>
      Questions span alphabet, vocabulary, grammar, and phrases.<br>
      We'll set your mastery levels based on your results.
    </p>
    <div class="pt-settings">
      <div class="pt-setting-row">
        <label class="pt-setting-label">Your level</label>
        <div class="pt-btn-group">
          <button class="pt-opt-btn active" id="pt-diff-beginner" data-action="set-pt-difficulty" data-diff="beginner">Beginner</button>
          <button class="pt-opt-btn" id="pt-diff-intermediate" data-action="set-pt-difficulty" data-diff="intermediate">Intermediate</button>
          <button class="pt-opt-btn" id="pt-diff-advanced" data-action="set-pt-difficulty" data-diff="advanced">Advanced</button>
        </div>
      </div>
      <div class="pt-setting-row">
        <label class="pt-setting-label">Test length</label>
        <div class="pt-btn-group">
          <button class="pt-opt-btn" id="pt-len-short" data-action="set-pt-len" data-len="short">Short (~15)</button>
          <button class="pt-opt-btn active" id="pt-len-medium" data-action="set-pt-len" data-len="medium">Medium (~35)</button>
          <button class="pt-opt-btn" id="pt-len-long" data-action="set-pt-len" data-len="long">Long (~50)</button>
        </div>
      </div>
    </div>
    <button class="btn-primary" id="pt-begin-btn" data-action="begin-placement-quiz" style="font-size:1.1rem;padding:14px 36px;">Begin Test</button>
    <div id="pt-loading-msg" style="margin-top:12px;color:var(--text-dim);font-size:0.9rem;display:none;">Loading vocabularyâ€¦ please wait</div>
    <div style="margin-top:16px;">
      <a href="#" data-action="discard-placement" style="color:var(--text-dim);font-size:0.85rem;">Skip â€” I'm a complete beginner</a>
    </div>
  </div>
</div>

<!-- PLACEMENT TEST: QUIZ -->
<div class="screen" id="placement-quiz">
  <div class="quiz-header">
    <button class="back-btn" data-action="quit-placement">â† Quit</button>
    <h2 id="pt-quiz-title">Placement Test</h2>
    <div id="pt-score">0 / 0</div>
  </div>
  <div class="placement-stage-label" id="pt-stage-label">Alphabet</div>
  <div class="quiz-progress-bar">
    <div class="quiz-progress-fill" id="pt-progress-fill"></div>
  </div>
  <div class="quiz-question-area" id="pt-question-area"></div>
  <div id="pt-answer-area"></div>
  <div class="quiz-feedback" id="pt-feedback"></div>
  <button class="btn-primary quiz-next-btn" id="pt-next-btn" data-action="next-pt-question">Continue â†’</button>
</div>

<!-- PLACEMENT TEST: RESULTS -->
<div class="screen" id="placement-results">
  <div style="text-align:center;padding-top:30px;">
    <h2 style="font-size:1.6rem;margin-bottom:8px;">Placement Results</h2>
    <p style="color:var(--text-dim);margin-bottom:24px;" id="pt-results-summary">Here's how you did:</p>
    <div class="placement-results-grid" id="pt-results-grid"></div>
    <div style="margin-top:32px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap;">
      <button class="btn-primary" data-action="apply-placement" style="padding:14px 32px;font-size:1.05rem;">Apply & Start Learning</button>
      <button class="nav-btn" data-action="discard-placement">Discard & Start Fresh</button>
    </div>
  </div>
</div>

<!-- TODAY SCREEN -->
<div class="screen" id="today-screen">
  <div class="hero">
    <h2>à¦†à¦œà¦•à§‡à¦° à¦ªà¦°à¦¿à¦•à¦²à§à¦ªà¦¨à¦¾</h2>
    <p data-t="Today's study plan">Today's study plan</p>
  </div>
  <div id="today-body" style="padding:0 1rem 2rem"></div>
</div>

<!-- HOME (Alphabet) -->
<div class="screen active" id="home">
  <div class="hero">
    <h2>à¦¬à¦¾à¦‚à¦²à¦¾ à¦¬à¦°à§à¦£à¦®à¦¾à¦²à¦¾</h2>
    <p data-t="Master the Bengali alphabet step by step">Master the Bengali alphabet step by step</p>
  </div>
  <div class="module-grid" id="module-grid"></div>
</div>

<!-- VOCAB HOME -->
<div class="screen" id="vocab-home">
  <div class="hero">
    <h2>à¦¶à¦¬à§à¦¦à¦­à¦¾à¦£à§à¦¡à¦¾à¦°</h2>
    <p data-t="Learn 5,000+ common Bengali words">Learn 5,000+ common Bengali words</p>
  </div>
  <div class="module-grid" id="vocab-module-grid"></div>
</div>

<!-- LISTENING HOME -->
<div class="screen" id="listening-home">
  <div class="learn-header">
    <button class="back-btn" data-action="show-screen" data-screen="home">â† Back</button>
    <h2>ğŸ§ Listening Practice</h2>
  </div>
  <div style="text-align:center;padding:20px 0 12px;color:var(--text-dim);font-size:0.9rem">
    Identify Bengali sounds and words by ear only.
  </div>
  <div class="module-grid" style="max-width:480px;margin:0 auto">
    <div class="module-card" data-action="start-letter-listening">
      <div class="module-icon">ğŸ”¤</div>
      <h3>Letter Sounds</h3>
      <p>Hear a letter â€” identify which one</p>
    </div>
    <div class="module-card" data-action="start-vocab-listening">
      <div class="module-icon">ğŸ“–</div>
      <h3>Vocabulary (All)</h3>
      <p>Hear a word â€” give its meaning</p>
    </div>
  </div>
  <div style="max-width:760px;margin:12px auto 0;padding:0 6px;">
    <div style="font-size:0.85rem;color:var(--text-dim);margin:6px 0 10px;">Start vocab listening by category:</div>
    <div class="cat-chips" id="listening-vocab-categories"></div>
  </div>
</div>

<!-- VOCAB BROWSE -->
<div class="screen" id="vocab-browse">
  <div class="vb-header">
    <button class="back-btn" data-action="show-screen" data-screen="vocab-home">â† Back</button>
    <input type="text" class="vb-search" id="vb-search" placeholder="Search wordsâ€¦" oninput="filterVocabList()">
  </div>
  <div class="cat-chips" id="cat-chips"></div>
  <div class="vocab-list" id="vocab-list"></div>
  <div class="vocab-pagination" id="vocab-pagination"></div>
</div>

<!-- VOCAB LEARN (flashcards) -->
<div class="screen" id="vocab-learn">
  <div class="learn-header">
    <button class="back-btn" data-action="show-screen" data-screen="vocab-home">â† Back</button>
    <h2 id="vl-title">Category</h2>
    <div class="card-counter" id="vl-counter">1 / 10</div>
  </div>
  <div class="card-hint">Tap card to flip</div>
  <div class="flashcard-container">
    <div class="flashcard" id="vocab-flashcard" data-action="flip-vocab-card">
      <div class="flashcard-face flashcard-front">
        <div class="vocab-card-bengali" id="vc-bengali">à¦¶à¦¬à§à¦¦</div>
        <div class="vocab-card-roman" id="vc-roman">shobdo</div>
      </div>
      <div class="flashcard-face flashcard-back">
        <div class="vocab-card-pos" id="vc-pos">noun</div>
        <div class="vocab-card-english" id="vc-english">word</div>
        <div class="vocab-card-cat" id="vc-cat">Education</div>
        <div class="vocab-card-example" id="vc-example"></div>
        <div class="wm-sound-row">
          <button class="card-sound-btn" id="vc-sound-btn" data-action="speak-current-vocab" aria-label="Play word">ğŸ”Š Word</button>
          <button class="card-sound-btn" id="vc-example-btn" data-action="speak-current-vocab-example" aria-label="Play example sentence">ğŸ”Š Example</button>
        </div>
      </div>
    </div>
  </div>
  <div class="learn-nav">
    <button class="nav-btn" id="vl-prev" data-action="prev-vocab-card">â† Prev</button>
    <button class="btn-primary" id="vl-quiz-btn" data-action="start-vocab-quiz">Start Quiz â†’</button>
    <button class="nav-btn" id="vl-next" data-action="next-vocab-card">Next â†’</button>
  </div>
</div>

<!-- VOCAB QUIZ -->
<div class="screen" id="vocab-quiz">
  <div class="quiz-header">
    <button class="back-btn" data-action="show-screen" data-screen="vocab-home">â† Quit</button>
    <h2 id="vq-title">Vocab Quiz</h2>
    <div id="vq-score">0 / 0</div>
  </div>
  <div class="quiz-progress-bar">
    <div class="quiz-progress-fill" id="vq-progress-fill"></div>
  </div>
  <div class="quiz-question-area" id="vq-question-area"></div>
  <div id="vq-answer-area"></div>
  <div class="quiz-feedback" id="vq-feedback"></div>
  <div id="vq-rating-area" class="quiz-rating-area">
    <p class="quiz-rating-prompt">How difficult was this?</p>
    <div class="quiz-rating-btns">
      <button class="rating-btn rating-hard" data-action="rate-answer" data-rating="2"><span class="rating-label">Hard</span><span class="rating-interval"></span></button>
      <button class="rating-btn rating-good" data-action="rate-answer" data-rating="3"><span class="rating-label">Good</span><span class="rating-interval"></span></button>
      <button class="rating-btn rating-easy" data-action="rate-answer" data-rating="4"><span class="rating-label">Easy</span><span class="rating-interval"></span></button>
    </div>
  </div>
  <button class="btn-primary quiz-next-btn" id="vq-next-btn" data-action="next-vocab-question">Continue â†’</button>
</div>

<!-- VOCAB RESULTS -->
<div class="screen" id="vocab-results">
  <div class="results-circle" id="vr-circle">
    <svg viewBox="0 0 160 160">
      <circle class="bg-ring" cx="80" cy="80" r="72"/>
      <circle class="fg-ring" id="vr-ring" cx="80" cy="80" r="72"
        stroke-dasharray="452.4" stroke-dashoffset="452.4"/>
    </svg>
    <span id="vr-pct">0%</span>
  </div>
  <div class="results-title" id="vr-title">Great job!</div>
  <div class="results-sub" id="vr-sub">You scored 8/10</div>
  <div class="results-actions">
    <button class="btn-primary" data-action="retry-vocab-quiz">Try Again</button>
    <button class="nav-btn" id="vr-retry-missed" data-action="retry-missed-vocab" style="display:none">Retry Missed</button>
    <button class="nav-btn" data-action="show-screen" data-screen="vocab-home">Home</button>
    <button class="btn-primary" id="vr-continue-review" data-action="run-next-review" style="display:none">Continue â†’</button>
  </div>
  <div id="vr-missed"></div>
</div>

<!-- LEARN -->
<div class="screen" id="learn">
  <div class="learn-header">
    <button class="back-btn" data-action="go-module-home">â† Back</button>
    <h2 id="learn-title">Vowels</h2>
    <div class="card-counter" id="card-counter">1 / 11</div>
  </div>
  <div class="card-hint">Tap card to flip</div>
  <div class="flashcard-container">
    <div class="flashcard" id="flashcard" data-action="flip-card">
      <div class="flashcard-face flashcard-front" id="card-front">
        <div class="letter-type-badge badge-vowel" id="card-badge">VOWEL</div>
        <div class="letter-display" id="card-letter">à¦…</div>
      </div>
      <div class="flashcard-face flashcard-back" id="card-back">
        <div class="letter-name" id="card-name">Ã” (ShÃ´ro Ã”)</div>
        <div class="letter-translit" id="card-translit">Romanized: Ã´ / o</div>
        <div class="letter-sound" id="card-sound">Sound: /É”/ like "o" in "hot"</div>
        <div class="letter-example" id="card-example">Example: à¦…à¦¨à§‡à¦• (Ã´nek) â€” many/much</div>
        <button class="card-sound-btn" id="card-sound-btn" data-action="speak-current-letter" aria-label="Play pronunciation">ğŸ”Š</button>
        <button class="canvas-practice-btn" data-action="open-canvas" aria-label="Practice writing">âœï¸ Practice</button>
      </div>
    </div>
  </div>
  <div class="learn-nav">
    <button class="nav-btn" id="prev-btn" data-action="prev-card">â† Prev</button>
    <button class="btn-primary" id="quiz-start-btn" data-action="start-quiz">Start Quiz â†’</button>
    <button class="nav-btn" id="next-btn" data-action="next-card">Next â†’</button>
  </div>
  <div class="shortcut-hint">âŒ¨ï¸ Shortcut: <kbd>Space</kbd> flips the card</div>
</div>

<!-- QUIZ -->
<div class="screen" id="quiz">
  <div class="quiz-header">
    <button class="back-btn" data-action="go-module-home">â† Quit</button>
    <h2 id="quiz-title">Quiz</h2>
    <div id="quiz-score">0 / 0</div>
  </div>
  <div class="quiz-progress-bar">
    <div class="quiz-progress-fill" id="quiz-progress-fill"></div>
  </div>
  <div class="quiz-question-area" id="quiz-question-area"></div>
  <div id="quiz-answer-area"></div>
  <div class="quiz-feedback" id="quiz-feedback"></div>
  <div id="quiz-rating-area" class="quiz-rating-area">
    <p class="quiz-rating-prompt">How difficult was this?</p>
    <p class="shortcut-hint quiz-shortcut-hint">âŒ¨ï¸ Shortcuts: <kbd>1</kbd>/<kbd>2</kbd>/<kbd>3</kbd> or <kbd>N</kbd>/<kbd>Y</kbd></p>
    <div class="quiz-rating-btns">
      <button class="rating-btn rating-hard" data-action="rate-answer" data-rating="2"><span class="rating-label">Hard</span><span class="rating-interval"></span></button>
      <button class="rating-btn rating-good" data-action="rate-answer" data-rating="3"><span class="rating-label">Good</span><span class="rating-interval"></span></button>
      <button class="rating-btn rating-easy" data-action="rate-answer" data-rating="4"><span class="rating-label">Easy</span><span class="rating-interval"></span></button>
    </div>
  </div>
  <button class="btn-primary quiz-next-btn" id="quiz-next-btn" data-action="next-question">Continue â†’</button>
</div>

<!-- RESULTS -->
<div class="screen" id="results">
  <div class="results-circle" id="results-circle">
    <svg viewBox="0 0 160 160">
      <circle class="bg-ring" cx="80" cy="80" r="72"/>
      <circle class="fg-ring" id="results-ring" cx="80" cy="80" r="72"
        stroke-dasharray="452.4" stroke-dashoffset="452.4"/>
    </svg>
    <span id="results-pct">0%</span>
  </div>
  <div class="results-title" id="results-title">Great job!</div>
  <div class="results-sub" id="results-sub">You scored 8/10</div>
  <div class="results-actions">
    <button class="btn-primary" data-action="retry-quiz">Try Again</button>
    <button class="nav-btn" id="results-retry-missed" data-action="retry-missed-quiz" style="display:none">Retry Missed</button>
    <button class="nav-btn" data-action="go-module-home">Home</button>
    <button class="btn-primary" id="results-continue-review" data-action="run-next-review" style="display:none">Continue â†’</button>
  </div>
  <div id="results-missed"></div>
</div>

<!-- CHART -->
<div class="screen" id="chart">
  <div class="chart-header">
    <button class="back-btn" data-action="show-screen" data-screen="home">â† Back</button>
    <h2 data-t="Full Alphabet Chart">Full Alphabet Chart</h2>
  </div>
  <div id="chart-content"></div>
</div>

<!-- CANVAS WRITING PRACTICE OVERLAY -->
<div class="canvas-overlay" id="canvas-overlay" style="display:none">
  <div class="canvas-modal">
    <button class="canvas-close-btn" data-action="close-canvas">âœ•</button>
    <div class="canvas-char-label" id="canvas-char-label"></div>
    <canvas id="tracing-canvas" width="400" height="400"></canvas>
    <div id="canvas-writing-status" class="canvas-writing-status"></div>
    <div id="stroke-hints" class="stroke-hints"></div>
    <div class="canvas-actions-row">
      <button class="nav-btn" data-action="clear-canvas">Clear</button>
      <button class="btn-primary" data-action="complete-canvas-letter">Mark Complete âœ“</button>
    </div>
  </div>
</div>

<!-- GRAMMAR HOME -->
<div class="screen" id="grammar-home">
  <div class="hero">
    <h2>à¦¬à§à¦¯à¦¾à¦•à¦°à¦£</h2>
    <p data-t="Master Bengali grammar in 36 lessons â€” including sound changes, reading passages, and Mixed Review">Master Bengali grammar in 36 lessons â€” including sound changes, reading passages, and Mixed Review</p>
  </div>
  <div class="conj-table-section">
    <button class="conj-table-toggle" data-action="toggle-conj-table" aria-expanded="false" id="conj-toggle-btn">
      à¦•à§à¦°à¦¿à§Ÿà¦¾ à¦°à§‚à¦ªà¦¾à¦¨à§à¦¤à¦° â€” Verb Conjugation Explorer <span class="conj-toggle-arrow">â–¸</span>
    </button>
    <div class="conj-table-wrap" id="conj-table-wrap" hidden>
      <div id="conj-table-ui"></div>
    </div>
  </div>
  <div class="module-grid" id="grammar-module-grid"></div>
</div>

<!-- GRAMMAR LESSON -->
<div class="screen" id="grammar-lesson">
  <div class="learn-header">
    <button class="back-btn" data-action="show-screen" data-screen="grammar-home">â† Back</button>
    <h2 id="gl-title">Lesson</h2>
    <div></div>
  </div>
  <div class="grammar-content" id="gl-content"></div>
</div>

<!-- GRAMMAR QUIZ -->
<div class="screen" id="grammar-quiz">
  <div class="quiz-header">
    <button class="back-btn" data-action="show-screen" data-screen="grammar-home">â† Quit</button>
    <h2 id="gq-title">Grammar Quiz</h2>
    <div id="gq-score">0 / 0</div>
  </div>
  <div class="quiz-progress-bar">
    <div class="quiz-progress-fill" id="gq-progress-fill"></div>
  </div>
  <div class="quiz-question-area" id="gq-question-area"></div>
  <div id="gq-answer-area"></div>
  <div class="quiz-feedback" id="gq-feedback"></div>
  <div id="gq-rating-area" class="quiz-rating-area">
    <p class="quiz-rating-prompt">How difficult was this?</p>
    <div class="quiz-rating-btns">
      <button class="rating-btn rating-hard" data-action="rate-answer" data-rating="2"><span class="rating-label">Hard</span><span class="rating-interval"></span></button>
      <button class="rating-btn rating-good" data-action="rate-answer" data-rating="3"><span class="rating-label">Good</span><span class="rating-interval"></span></button>
      <button class="rating-btn rating-easy" data-action="rate-answer" data-rating="4"><span class="rating-label">Easy</span><span class="rating-interval"></span></button>
    </div>
  </div>
  <button class="btn-primary quiz-next-btn" id="gq-next-btn" data-action="next-grammar-question">Continue â†’</button>
</div>

<!-- GRAMMAR RESULTS -->
<div class="screen" id="grammar-results">
  <div class="results-circle" id="gr-circle">
    <svg viewBox="0 0 160 160">
      <circle class="bg-ring" cx="80" cy="80" r="72"/>
      <circle class="fg-ring" id="gr-ring" cx="80" cy="80" r="72"
        stroke-dasharray="452.4" stroke-dashoffset="452.4"/>
    </svg>
    <span id="gr-pct">0%</span>
  </div>
  <div class="results-title" id="gr-title">Great job!</div>
  <div class="results-sub" id="gr-sub">You scored 8/10</div>
  <div class="results-actions">
    <button class="btn-primary" data-action="retry-grammar-quiz">Try Again</button>
    <button class="nav-btn" id="gr-retry-missed" data-action="retry-missed-grammar" style="display:none">Retry Missed</button>
    <button class="nav-btn" data-action="show-screen" data-screen="grammar-home">Home</button>
    <button class="btn-primary" id="gr-continue-review" data-action="run-next-review" style="display:none">Continue â†’</button>
  </div>
  <div id="gr-missed"></div>
</div>

<!-- NUMBERS HOME -->
<div class="screen" id="numbers-home">
  <div class="hero"><h2>à¦¸à¦‚à¦–à§à¦¯à¦¾</h2><p data-t="Bengali numerals and number words">Bengali numerals and number words</p></div>
  <div class="module-grid" id="numbers-module-grid"></div>
</div>

<!-- PHRASES HOME -->
<div class="screen" id="phrases-home">
  <div class="hero">
    <h2>à¦¬à¦¾à¦•à§à¦¯à¦¾à¦‚à¦¶</h2>
    <p data-t="Learn conversational phrases for real-life situations">Learn conversational phrases for real-life situations</p>
  </div>
  <div class="module-grid" id="phrases-module-grid"></div>
</div>

<!-- PHRASES SITUATION VIEW -->
<div class="screen" id="phrases-situation">
  <div class="learn-header">
    <button class="back-btn" data-action="show-screen" data-screen="phrases-home">â† Back</button>
    <h2 id="ps-title">Situation</h2>
    <div></div>
  </div>
  <div class="grammar-content" id="ps-content"></div>
</div>

<!-- PHRASES QUIZ -->
<div class="screen" id="phrases-quiz">
  <div class="quiz-header">
    <button class="back-btn" data-action="show-screen" data-screen="phrases-home">â† Quit</button>
    <h2 id="phq-title">Phrases Quiz</h2>
    <div id="phq-score">0 / 0</div>
  </div>
  <div class="quiz-progress-bar">
    <div class="quiz-progress-fill" id="phq-progress-fill"></div>
  </div>
  <div class="quiz-question-area" id="phq-question-area"></div>
  <div id="phq-answer-area"></div>
  <div class="quiz-feedback" id="phq-feedback"></div>
  <div id="phq-rating-area" class="quiz-rating-area">
    <p class="quiz-rating-prompt">How difficult was this?</p>
    <div class="quiz-rating-btns">
      <button class="rating-btn rating-hard" data-action="rate-answer" data-rating="2"><span class="rating-label">Hard</span><span class="rating-interval"></span></button>
      <button class="rating-btn rating-good" data-action="rate-answer" data-rating="3"><span class="rating-label">Good</span><span class="rating-interval"></span></button>
      <button class="rating-btn rating-easy" data-action="rate-answer" data-rating="4"><span class="rating-label">Easy</span><span class="rating-interval"></span></button>
    </div>
  </div>
  <button class="btn-primary quiz-next-btn" id="phq-next-btn" data-action="next-phrases-question">Continue â†’</button>
</div>

<!-- PHRASES RESULTS -->
<div class="screen" id="phrases-results">
  <div class="results-circle" id="phr-circle">
    <svg viewBox="0 0 160 160">
      <circle class="bg-ring" cx="80" cy="80" r="72"/>
      <circle class="fg-ring" id="phr-ring" cx="80" cy="80" r="72"
        stroke-dasharray="452.4" stroke-dashoffset="452.4"/>
    </svg>
    <span id="phr-pct">0%</span>
  </div>
  <div class="results-title" id="phr-title">Great job!</div>
  <div class="results-sub" id="phr-sub">You scored 8/10</div>
  <div class="results-actions">
    <button class="btn-primary" data-action="retry-phrases-quiz">Try Again</button>
    <button class="nav-btn" id="phr-retry-missed" data-action="retry-missed-phrases" style="display:none">Retry Missed</button>
    <button class="nav-btn" data-action="show-screen" data-screen="phrases-home">Home</button>
    <button class="btn-primary" id="phr-continue-review" data-action="run-next-review" style="display:none">Continue â†’</button>
  </div>
  <div id="phr-missed"></div>
</div>

<!-- TRIVIA HOME -->
<div class="screen" id="trivia-home">
  <div class="hero">
    <h2>à¦¬à¦¾à¦‚à¦²à¦¾ à¦¤à¦¥à§à¦¯</h2>
    <p data-t="Test your knowledge of Bengali culture, history, and more">Test your knowledge of Bengali culture, history, and more</p>
  </div>
  <div class="module-grid" id="trivia-category-grid"></div>
</div>

<!-- TRIVIA QUIZ -->
<div class="screen" id="trivia-quiz">
  <div class="learn-header">
    <button class="back-btn" data-action="trivia-quiz-back">â† Back</button>
    <h2 id="tq-title">Trivia</h2>
    <div id="tq-progress-label" class="progress-label"></div>
  </div>
  <div class="quiz-progress-bar" style="margin:0 0 1rem">
    <div class="quiz-progress-fill" id="tq-progress-bar" style="width:0%"></div>
  </div>
  <div id="tq-question-area" style="padding:0 1rem 1rem"></div>
  <div id="tq-feedback" style="padding:0 1rem;min-height:2rem"></div>
  <div id="tq-explanation" class="trivia-explanation" style="display:none"></div>
  <button class="btn-primary quiz-next-btn" id="tq-next-btn"
          data-action="trivia-next" style="display:none">Next â†’</button>
</div>

<!-- TRIVIA RESULTS -->
<div class="screen" id="trivia-results">
  <div class="results-circle" id="tr-circle">
    <svg viewBox="0 0 160 160">
      <circle class="bg-ring" cx="80" cy="80" r="72"/>
      <circle class="fg-ring" id="tr-ring" cx="80" cy="80" r="72"
        stroke-dasharray="452.4" stroke-dashoffset="452.4"/>
    </svg>
    <span id="tr-pct">0%</span>
  </div>
  <div class="results-title" id="tr-title">Great job!</div>
  <div class="results-sub" id="tr-sub">You scored 8/10</div>
  <div class="results-actions">
    <button class="btn-primary" data-action="trivia-play-again">Try Again</button>
    <button class="nav-btn" data-action="trivia-quiz-back">Home</button>
  </div>
  <div id="tr-missed"></div>
</div>

<!-- RECIPES HOME -->
<div class="screen" id="recipes-home">
  <div class="hero">
    <h2>à¦°à¦¾à¦¨à§à¦¨à¦¾à¦˜à¦°</h2>
    <p data-t="Learn Bengali through classic recipes â€” read, cook, and quiz yourself">Learn Bengali through classic recipes â€” read, cook, and quiz yourself</p>
  </div>
  <div class="module-grid" id="recipes-module-grid"></div>
</div>

<!-- RECIPE DETAIL -->
<div class="screen" id="recipe-detail">
  <div class="learn-header">
    <button class="back-btn" data-action="show-screen" data-screen="recipes-home">â† Back</button>
    <h2 id="rd-title">Recipe</h2>
    <div></div>
  </div>
  <div class="recipe-detail" id="rd-content"></div>
</div>

<!-- RECIPE QUIZ -->
<div class="screen" id="recipe-quiz">
  <div class="quiz-header">
    <button class="back-btn" data-action="show-screen" data-screen="recipes-home">â† Quit</button>
    <h2 id="rq-title">Recipe Quiz</h2>
    <div id="rq-score">0 / 0</div>
  </div>
  <div class="quiz-progress-bar">
    <div class="quiz-progress-fill" id="rq-progress-fill"></div>
  </div>
  <div class="quiz-question-area" id="rq-question-area"></div>
  <div id="rq-feedback" style="padding:0 1rem;min-height:2rem"></div>
  <div id="rq-explanation" class="trivia-explanation" style="display:none"></div>
  <button class="btn-primary quiz-next-btn" id="rq-next-btn"
          data-action="recipe-next" style="display:none">Next â†’</button>
</div>

<!-- RECIPE RESULTS -->
<div class="screen" id="recipe-results">
  <div class="results-circle" id="rr-circle">
    <svg viewBox="0 0 160 160">
      <circle class="bg-ring" cx="80" cy="80" r="72"/>
      <circle class="fg-ring" id="rr-ring" cx="80" cy="80" r="72"
        stroke-dasharray="452.4" stroke-dashoffset="452.4"/>
    </svg>
    <span id="rr-pct">0%</span>
  </div>
  <div class="results-title" id="rr-title">Great job!</div>
  <div class="results-sub" id="rr-sub">You scored 3/3</div>
  <div class="results-actions">
    <button class="btn-primary" data-action="recipe-retry">Try Again</button>
    <button class="nav-btn" data-action="show-screen" data-screen="recipes-home">Home</button>
  </div>
  <div id="rr-missed"></div>
</div>

<!-- MUSIC HOME -->
<div class="screen" id="music-home">
  <div class="hero">
    <h2>à¦—à¦¾à¦¨à§‡à¦° à¦†à¦¸à¦°</h2>
    <p data-t="Learn Bengali through classic songs â€” read lyrics, explore culture, and quiz yourself">Learn Bengali through classic songs â€” read lyrics, explore culture, and quiz yourself</p>
  </div>
  <div class="module-grid" id="music-module-grid"></div>
</div>

<!-- MUSIC DETAIL -->
<div class="screen" id="music-detail">
  <div class="learn-header">
    <button class="back-btn" data-action="show-screen" data-screen="music-home">â† Back</button>
    <h2 id="md-title">Song</h2>
    <div></div>
  </div>
  <div class="music-detail" id="md-content"></div>
</div>

<!-- MUSIC QUIZ -->
<div class="screen" id="music-quiz">
  <div class="quiz-header">
    <button class="back-btn" data-action="show-screen" data-screen="music-home">â† Quit</button>
    <h2 id="mq-title">Music Quiz</h2>
    <div id="mq-score">0 / 0</div>
  </div>
  <div class="quiz-progress-bar">
    <div class="quiz-progress-fill" id="mq-progress-fill"></div>
  </div>
  <div class="quiz-question-area" id="mq-question-area"></div>
  <div id="mq-feedback" style="padding:0 1rem;min-height:2rem"></div>
  <div id="mq-explanation" class="trivia-explanation" style="display:none"></div>
  <button class="btn-primary quiz-next-btn" id="mq-next-btn"
          data-action="music-next" style="display:none">Next â†’</button>
</div>

<!-- MUSIC RESULTS -->
<div class="screen" id="music-results">
  <div class="results-circle" id="mr-circle">
    <svg viewBox="0 0 160 160">
      <circle class="bg-ring" cx="80" cy="80" r="72"/>
      <circle class="fg-ring" id="mr-ring" cx="80" cy="80" r="72"
        stroke-dasharray="452.4" stroke-dashoffset="452.4"/>
    </svg>
    <span id="mr-pct">0%</span>
  </div>
  <div class="results-title" id="mr-title">Great job!</div>
  <div class="results-sub" id="mr-sub">You scored 3/3</div>
  <div class="results-actions">
    <button class="btn-primary" data-action="music-retry">Try Again</button>
    <button class="nav-btn" data-action="show-screen" data-screen="music-home">Home</button>
  </div>
  <div id="mr-missed"></div>
</div>

<!-- MOVIES HOME -->
<div class="screen" id="movies-home">
  <div class="hero">
    <h2>à¦šà¦²à¦šà§à¦šà¦¿à¦¤à§à¦°</h2>
    <p data-t="Learn Bengali through classic films â€” explore stories, dialogue, and quiz yourself">Learn Bengali through classic films â€” explore stories, dialogue, and quiz yourself</p>
  </div>
  <div class="module-grid" id="movies-module-grid"></div>
</div>

<!-- MOVIE DETAIL -->
<div class="screen" id="movie-detail">
  <div class="learn-header">
    <button class="back-btn" data-action="show-screen" data-screen="movies-home">â† Back</button>
    <h2 id="mv-title">Movie</h2>
    <div></div>
  </div>
  <div class="movie-detail" id="mv-content"></div>
</div>

<!-- MOVIE QUIZ -->
<div class="screen" id="movie-quiz">
  <div class="quiz-header">
    <button class="back-btn" data-action="show-screen" data-screen="movies-home">â† Quit</button>
    <h2 id="mvq-title">Movie Quiz</h2>
    <div id="mvq-score">0 / 0</div>
  </div>
  <div class="quiz-progress-bar">
    <div class="quiz-progress-fill" id="mvq-progress-fill"></div>
  </div>
  <div class="quiz-question-area" id="mvq-question-area"></div>
  <div id="mvq-feedback" style="padding:0 1rem;min-height:2rem"></div>
  <div id="mvq-explanation" class="trivia-explanation" style="display:none"></div>
  <button class="btn-primary quiz-next-btn" id="mvq-next-btn"
          data-action="movie-next" style="display:none">Next â†’</button>
</div>

<!-- MOVIE RESULTS -->
<div class="screen" id="movie-results">
  <div class="results-circle" id="mvr-circle">
    <svg viewBox="0 0 160 160">
      <circle class="bg-ring" cx="80" cy="80" r="72"/>
      <circle class="fg-ring" id="mvr-ring" cx="80" cy="80" r="72"
        stroke-dasharray="452.4" stroke-dashoffset="452.4"/>
    </svg>
    <span id="mvr-pct">0%</span>
  </div>
  <div class="results-title" id="mvr-title">Great job!</div>
  <div class="results-sub" id="mvr-sub">You scored 3/3</div>
  <div class="results-actions">
    <button class="btn-primary" data-action="movie-retry">Try Again</button>
    <button class="nav-btn" data-action="show-screen" data-screen="movies-home">Home</button>
  </div>
  <div id="mvr-missed"></div>
</div>

<!-- POETRY HOME -->
<div class="screen" id="poetry-home">
  <div class="hero">
    <h2>à¦•à¦¬à¦¿à¦¤à¦¾</h2>
    <p data-t="Learn Bengali through classic poems â€” read verses, explore poets, and quiz yourself">Learn Bengali through classic poems â€” read verses, explore poets, and quiz yourself</p>
  </div>
  <div class="module-grid" id="poetry-module-grid"></div>
</div>

<!-- POETRY DETAIL -->
<div class="screen" id="poetry-detail">
  <div class="learn-header">
    <button class="back-btn" data-action="show-screen" data-screen="poetry-home">â† Back</button>
    <h2 id="po-title">Poem</h2>
    <div></div>
  </div>
  <div class="poetry-detail" id="po-content"></div>
</div>

<!-- POETRY QUIZ -->
<div class="screen" id="poetry-quiz">
  <div class="quiz-header">
    <button class="back-btn" data-action="show-screen" data-screen="poetry-home">â† Quit</button>
    <h2 id="poq-title">Poetry Quiz</h2>
    <div id="poq-score">0 / 0</div>
  </div>
  <div class="quiz-progress-bar">
    <div class="quiz-progress-fill" id="poq-progress-fill"></div>
  </div>
  <div class="quiz-question-area" id="poq-question-area"></div>
  <div id="poq-feedback" style="padding:0 1rem;min-height:2rem"></div>
  <div id="poq-explanation" class="trivia-explanation" style="display:none"></div>
  <button class="btn-primary quiz-next-btn" id="poq-next-btn"
          data-action="poetry-next" style="display:none">Next â†’</button>
</div>

<!-- POETRY RESULTS -->
<div class="screen" id="poetry-results">
  <div class="results-circle" id="por-circle">
    <svg viewBox="0 0 160 160">
      <circle class="bg-ring" cx="80" cy="80" r="72"/>
      <circle class="fg-ring" id="por-ring" cx="80" cy="80" r="72"
        stroke-dasharray="452.4" stroke-dashoffset="452.4"/>
    </svg>
    <span id="por-pct">0%</span>
  </div>
  <div class="results-title" id="por-title">Great job!</div>
  <div class="results-sub" id="por-sub">You scored 3/3</div>
  <div class="results-actions">
    <button class="btn-primary" data-action="poetry-retry">Try Again</button>
    <button class="nav-btn" data-action="show-screen" data-screen="poetry-home">Home</button>
  </div>
  <div id="por-missed"></div>
</div>

<!-- SPORTS HOME -->
<div class="screen" id="sports-home">
  <div class="hero">
    <h2>à¦–à§‡à¦²à¦¾à¦§à§à¦²à¦¾</h2>
    <p data-t="Learn Bengali through sports and athletes â€” explore culture, learn vocabulary, and quiz yourself">Learn Bengali through sports and athletes â€” explore culture, learn vocabulary, and quiz yourself</p>
  </div>
  <div class="module-grid" id="sports-module-grid"></div>
</div>

<!-- SPORT DETAIL -->
<div class="screen" id="sport-detail">
  <div class="learn-header">
    <button class="back-btn" data-action="show-screen" data-screen="sports-home">â† Back</button>
    <h2 id="sp-title">Sport</h2>
    <div></div>
  </div>
  <div class="sport-detail" id="sp-content"></div>
</div>

<!-- SPORT QUIZ -->
<div class="screen" id="sport-quiz">
  <div class="quiz-header">
    <button class="back-btn" data-action="show-screen" data-screen="sports-home">â† Quit</button>
    <h2 id="spq-title">Sport Quiz</h2>
    <div id="spq-score">0 / 0</div>
  </div>
  <div class="quiz-progress-bar">
    <div class="quiz-progress-fill" id="spq-progress-fill"></div>
  </div>
  <div class="quiz-question-area" id="spq-question-area"></div>
  <div id="spq-feedback" style="padding:0 1rem;min-height:2rem"></div>
  <div id="spq-explanation" class="trivia-explanation" style="display:none"></div>
  <button class="btn-primary quiz-next-btn" id="spq-next-btn"
          data-action="sport-next" style="display:none">Next â†’</button>
</div>

<!-- SPORT RESULTS -->
<div class="screen" id="sport-results">
  <div class="results-circle" id="spr-circle">
    <svg viewBox="0 0 160 160">
      <circle class="bg-ring" cx="80" cy="80" r="72"/>
      <circle class="fg-ring" id="spr-ring" cx="80" cy="80" r="72"
        stroke-dasharray="452.4" stroke-dashoffset="452.4"/>
    </svg>
    <span id="spr-pct">0%</span>
  </div>
  <div class="results-title" id="spr-title">Great job!</div>
  <div class="results-sub" id="spr-sub">You scored 3/3</div>
  <div class="results-actions">
    <button class="btn-primary" data-action="sport-retry">Try Again</button>
    <button class="nav-btn" data-action="show-screen" data-screen="sports-home">Home</button>
  </div>
  <div id="spr-missed"></div>
</div>

<!-- PROVERBS HOME -->
<div class="screen" id="proverbs-home">
  <div class="hero">
    <h2>à¦ªà§à¦°à¦¬à¦¾à¦¦ à¦“ à¦¬à¦¾à¦—à¦§à¦¾à¦°à¦¾</h2>
    <p data-t="Learn Bengali through proverbs and idioms â€” explore wisdom, learn vocabulary, and quiz yourself">Learn Bengali through proverbs and idioms â€” explore wisdom, learn vocabulary, and quiz yourself</p>
  </div>
  <div class="module-grid" id="proverbs-module-grid"></div>
</div>

<!-- PROVERB DETAIL -->
<div class="screen" id="proverb-detail">
  <div class="learn-header">
    <button class="back-btn" data-action="show-screen" data-screen="proverbs-home">â† Back</button>
    <h2 id="pv-title">Proverb</h2>
    <div></div>
  </div>
  <div class="proverb-detail" id="pv-content"></div>
</div>

<!-- PROVERB QUIZ -->
<div class="screen" id="proverb-quiz">
  <div class="quiz-header">
    <button class="back-btn" data-action="show-screen" data-screen="proverbs-home">â† Quit</button>
    <h2 id="pvq-title">Proverb Quiz</h2>
    <div id="pvq-score">0 / 0</div>
  </div>
  <div class="quiz-progress-bar">
    <div class="quiz-progress-fill" id="pvq-progress-fill"></div>
  </div>
  <div class="quiz-question-area" id="pvq-question-area"></div>
  <div id="pvq-feedback" style="padding:0 1rem;min-height:2rem"></div>
  <div id="pvq-explanation" class="trivia-explanation" style="display:none"></div>
  <button class="btn-primary quiz-next-btn" id="pvq-next-btn"
          data-action="proverb-next" style="display:none">Next â†’</button>
</div>

<!-- PROVERB RESULTS -->
<div class="screen" id="proverb-results">
  <div class="results-circle" id="pvr-circle">
    <svg viewBox="0 0 160 160">
      <circle class="bg-ring" cx="80" cy="80" r="72"/>
      <circle class="fg-ring" id="pvr-ring" cx="80" cy="80" r="72"
        stroke-dasharray="452.4" stroke-dashoffset="452.4"/>
    </svg>
    <span id="pvr-pct">0%</span>
  </div>
  <div class="results-title" id="pvr-title">Great job!</div>
  <div class="results-sub" id="pvr-sub">You scored 3/3</div>
  <div class="results-actions">
    <button class="btn-primary" data-action="proverb-retry">Try Again</button>
    <button class="nav-btn" data-action="show-screen" data-screen="proverbs-home">Home</button>
  </div>
  <div id="pvr-missed"></div>
</div>

<!-- FOLKTALES HOME -->
<div class="screen" id="folktales-home">
  <div class="hero">
    <h2>à¦²à§‹à¦•à¦•à¦¥à¦¾</h2>
    <p data-t="Learn Bengali through folk tales â€” explore stories, learn vocabulary, and quiz yourself">Learn Bengali through folk tales â€” explore stories, learn vocabulary, and quiz yourself</p>
  </div>
  <div class="module-grid" id="folktales-module-grid"></div>
</div>

<!-- FOLKTALE DETAIL -->
<div class="screen" id="folktale-detail">
  <div class="learn-header">
    <button class="back-btn" data-action="show-screen" data-screen="folktales-home">â† Back</button>
    <h2 id="ft-title">Folk Tale</h2>
    <div></div>
  </div>
  <div class="folktale-detail" id="ft-content"></div>
</div>

<!-- FOLKTALE QUIZ -->
<div class="screen" id="folktale-quiz">
  <div class="quiz-header">
    <button class="back-btn" data-action="show-screen" data-screen="folktales-home">â† Quit</button>
    <h2 id="ftq-title">Folk Tale Quiz</h2>
    <div id="ftq-score">0 / 0</div>
  </div>
  <div class="quiz-progress-bar">
    <div class="quiz-progress-fill" id="ftq-progress-fill"></div>
  </div>
  <div class="quiz-question-area" id="ftq-question-area"></div>
  <div id="ftq-feedback" style="padding:0 1rem;min-height:2rem"></div>
  <div id="ftq-explanation" class="trivia-explanation" style="display:none"></div>
  <button class="btn-primary quiz-next-btn" id="ftq-next-btn"
          data-action="folktale-next" style="display:none">Next â†’</button>
</div>

<!-- FOLKTALE RESULTS -->
<div class="screen" id="folktale-results">
  <div class="results-circle" id="ftr-circle">
    <svg viewBox="0 0 160 160">
      <circle class="bg-ring" cx="80" cy="80" r="72"/>
      <circle class="fg-ring" id="ftr-ring" cx="80" cy="80" r="72"
        stroke-dasharray="452.4" stroke-dashoffset="452.4"/>
    </svg>
    <span id="ftr-pct">0%</span>
  </div>
  <div class="results-title" id="ftr-title">Great job!</div>
  <div class="results-sub" id="ftr-sub">You scored 3/3</div>
  <div class="results-actions">
    <button class="btn-primary" data-action="folktale-retry">Try Again</button>
    <button class="nav-btn" data-action="show-screen" data-screen="folktales-home">Home</button>
  </div>
  <div id="ftr-missed"></div>
</div>

<!-- FESTIVALS HOME -->
<div class="screen" id="festivals-home">
  <div class="hero">
    <h2>à¦‰à§à¦¸à¦¬</h2>
    <p data-t="Learn Bengali through festivals â€” explore traditions, learn vocabulary, and quiz yourself">Learn Bengali through festivals â€” explore traditions, learn vocabulary, and quiz yourself</p>
  </div>
  <div class="module-grid" id="festivals-module-grid"></div>
</div>

<!-- FESTIVAL DETAIL -->
<div class="screen" id="festival-detail">
  <div class="learn-header">
    <button class="back-btn" data-action="show-screen" data-screen="festivals-home">â† Back</button>
    <h2 id="fe-title">Festival</h2>
    <div></div>
  </div>
  <div class="festival-detail" id="fe-content"></div>
</div>

<!-- FESTIVAL QUIZ -->
<div class="screen" id="festival-quiz">
  <div class="quiz-header">
    <button class="back-btn" data-action="show-screen" data-screen="festivals-home">â† Quit</button>
    <h2 id="feq-title">Festival Quiz</h2>
    <div id="feq-score">0 / 0</div>
  </div>
  <div class="quiz-progress-bar">
    <div class="quiz-progress-fill" id="feq-progress-fill"></div>
  </div>
  <div class="quiz-question-area" id="feq-question-area"></div>
  <div id="feq-feedback" style="padding:0 1rem;min-height:2rem"></div>
  <div id="feq-explanation" class="trivia-explanation" style="display:none"></div>
  <button class="btn-primary quiz-next-btn" id="feq-next-btn"
          data-action="festival-next" style="display:none">Next â†’</button>
</div>

<!-- FESTIVAL RESULTS -->
<div class="screen" id="festival-results">
  <div class="results-circle" id="fer-circle">
    <svg viewBox="0 0 160 160">
      <circle class="bg-ring" cx="80" cy="80" r="72"/>
      <circle class="fg-ring" id="fer-ring" cx="80" cy="80" r="72"
        stroke-dasharray="452.4" stroke-dashoffset="452.4"/>
    </svg>
    <span id="fer-pct">0%</span>
  </div>
  <div class="results-title" id="fer-title">Great job!</div>
  <div class="results-sub" id="fer-sub">You scored 3/3</div>
  <div class="results-actions">
    <button class="btn-primary" data-action="festival-retry">Try Again</button>
    <button class="nav-btn" data-action="show-screen" data-screen="festivals-home">Home</button>
  </div>
  <div id="fer-missed"></div>
</div>

<!-- HISTORY HOME -->
<div class="screen" id="history-home">
  <div class="hero">
    <h2>à¦‡à¦¤à¦¿à¦¹à¦¾à¦¸</h2>
    <p data-t="Learn Bengali through history â€” explore events and figures, learn vocabulary, and quiz yourself">Learn Bengali through history â€” explore events and figures, learn vocabulary, and quiz yourself</p>
  </div>
  <div class="module-grid" id="history-module-grid"></div>
</div>

<!-- HISTORY DETAIL -->
<div class="screen" id="history-detail">
  <div class="learn-header">
    <button class="back-btn" data-action="show-screen" data-screen="history-home">â† Back</button>
    <h2 id="hi-title">History</h2>
    <div></div>
  </div>
  <div class="history-detail" id="hi-content"></div>
</div>

<!-- HISTORY QUIZ -->
<div class="screen" id="history-quiz">
  <div class="quiz-header">
    <button class="back-btn" data-action="show-screen" data-screen="history-home">â† Quit</button>
    <h2 id="hiq-title">History Quiz</h2>
    <div id="hiq-score">0 / 0</div>
  </div>
  <div class="quiz-progress-bar">
    <div class="quiz-progress-fill" id="hiq-progress-fill"></div>
  </div>
  <div class="quiz-question-area" id="hiq-question-area"></div>
  <div id="hiq-feedback" style="padding:0 1rem;min-height:2rem"></div>
  <div id="hiq-explanation" class="trivia-explanation" style="display:none"></div>
  <button class="btn-primary quiz-next-btn" id="hiq-next-btn"
          data-action="history-next" style="display:none">Next â†’</button>
</div>

<!-- HISTORY RESULTS -->
<div class="screen" id="history-results">
  <div class="results-circle" id="hir-circle">
    <svg viewBox="0 0 160 160">
      <circle class="bg-ring" cx="80" cy="80" r="72"/>
      <circle class="fg-ring" id="hir-ring" cx="80" cy="80" r="72"
        stroke-dasharray="452.4" stroke-dashoffset="452.4"/>
    </svg>
    <span id="hir-pct">0%</span>
  </div>
  <div class="results-title" id="hir-title">Great job!</div>
  <div class="results-sub" id="hir-sub">You scored 3/3</div>
  <div class="results-actions">
    <button class="btn-primary" data-action="history-retry">Try Again</button>
    <button class="nav-btn" data-action="show-screen" data-screen="history-home">Home</button>
  </div>
  <div id="hir-missed"></div>
</div>

<!-- TRAVEL HOME -->
<div class="screen" id="travel-home">
  <div class="hero">
    <h2>à¦­à§à¦°à¦®à¦£</h2>
    <p data-t="Learn Bengali through travel â€” explore destinations, learn vocabulary, and quiz yourself">Learn Bengali through travel â€” explore destinations, learn vocabulary, and quiz yourself</p>
  </div>
  <div class="module-grid" id="travel-module-grid"></div>
</div>

<!-- TRAVEL DETAIL -->
<div class="screen" id="travel-detail">
  <div class="learn-header">
    <button class="back-btn" data-action="show-screen" data-screen="travel-home">â† Back</button>
    <h2 id="tr-detail-title">Travel</h2>
    <div></div>
  </div>
  <div class="travel-detail" id="tr-detail-content"></div>
</div>

<!-- TRAVEL QUIZ -->
<div class="screen" id="travel-quiz">
  <div class="quiz-header">
    <button class="back-btn" data-action="show-screen" data-screen="travel-home">â† Quit</button>
    <h2 id="trq-title">Travel Quiz</h2>
    <div id="trq-score">0 / 0</div>
  </div>
  <div class="quiz-progress-bar">
    <div class="quiz-progress-fill" id="trq-progress-fill"></div>
  </div>
  <div class="quiz-question-area" id="trq-question-area"></div>
  <div id="trq-feedback" style="padding:0 1rem;min-height:2rem"></div>
  <div id="trq-explanation" class="trivia-explanation" style="display:none"></div>
  <button class="btn-primary quiz-next-btn" id="trq-next-btn"
          data-action="travel-next" style="display:none">Next â†’</button>
</div>

<!-- TRAVEL RESULTS -->
<div class="screen" id="travel-results">
  <div class="results-circle" id="trr-circle">
    <svg viewBox="0 0 160 160">
      <circle class="bg-ring" cx="80" cy="80" r="72"/>
      <circle class="fg-ring" id="trr-ring" cx="80" cy="80" r="72"
        stroke-dasharray="452.4" stroke-dashoffset="452.4"/>
    </svg>
    <span id="trr-pct">0%</span>
  </div>
  <div class="results-title" id="trr-title">Great job!</div>
  <div class="results-sub" id="trr-sub">You scored 3/3</div>
  <div class="results-actions">
    <button class="btn-primary" data-action="travel-retry">Try Again</button>
    <button class="nav-btn" data-action="show-screen" data-screen="travel-home">Home</button>
  </div>
  <div id="trr-missed"></div>
</div>

<!-- CONVERSATIONS HOME -->
<div class="screen" id="conv-home">
  <div class="hero">
    <h2>à¦•à¦¥à§‹à¦ªà¦•à¦¥à¦¨</h2>
    <p data-t="Practice Bengali conversations â€” read dialogues, role-play, and quiz yourself">Practice Bengali conversations â€” read dialogues, role-play, and quiz yourself</p>
  </div>
  <div class="module-grid" id="conv-module-grid"></div>
</div>

<!-- CONVERSATION DIALOGUE -->
<div class="screen" id="conv-dialogue">
  <div class="learn-header">
    <button class="back-btn" data-action="show-screen" data-screen="conv-home">â† Back</button>
    <h2 id="cv-title">Conversation</h2>
    <div></div>
  </div>
  <div class="conv-detail" id="cv-content"></div>
</div>

<!-- CONVERSATION ROLEPLAY -->
<div class="screen" id="conv-roleplay">
  <div class="learn-header">
    <button class="back-btn" data-action="show-screen" data-screen="conv-home">â† Back</button>
    <h2 id="cvrp-title">Role-play</h2>
    <div id="cvrp-progress"></div>
  </div>
  <div id="cvrp-content" style="padding:0 1rem 2rem;max-width:700px;margin:0 auto"></div>
</div>

<!-- CONVERSATION QUIZ -->
<div class="screen" id="conv-quiz">
  <div class="quiz-header">
    <button class="back-btn" data-action="show-screen" data-screen="conv-home">â† Quit</button>
    <h2 id="cvq-title">Conversation Quiz</h2>
    <div id="cvq-score">0 / 0</div>
  </div>
  <div class="quiz-progress-bar">
    <div class="quiz-progress-fill" id="cvq-progress-fill"></div>
  </div>
  <div class="quiz-question-area" id="cvq-question-area"></div>
  <div id="cvq-feedback" style="padding:0 1rem;min-height:2rem"></div>
  <div id="cvq-explanation" class="trivia-explanation" style="display:none"></div>
  <button class="btn-primary quiz-next-btn" id="cvq-next-btn"
          data-action="conv-next" style="display:none">Next â†’</button>
</div>

<!-- CONVERSATION RESULTS -->
<div class="screen" id="conv-results">
  <div class="results-circle" id="cvr-circle">
    <svg viewBox="0 0 160 160">
      <circle class="bg-ring" cx="80" cy="80" r="72"/>
      <circle class="fg-ring" id="cvr-ring" cx="80" cy="80" r="72"
        stroke-dasharray="452.4" stroke-dashoffset="452.4"/>
    </svg>
    <span id="cvr-pct">0%</span>
  </div>
  <div class="results-title" id="cvr-title">Great job!</div>
  <div class="results-sub" id="cvr-sub">You scored 3/3</div>
  <div class="results-actions">
    <button class="btn-primary" data-action="conv-retry">Try Again</button>
    <button class="nav-btn" data-action="show-screen" data-screen="conv-home">Home</button>
  </div>
  <div id="cvr-missed"></div>
</div>

<script type="module" src="app.js"></script>

<!-- â”€â”€ First-run Onboarding Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="onboarding-modal" class="onboarding-overlay" style="display:none">
  <div class="onboarding-card">
    <h2 class="onboarding-title">Welcome to à¦¬à¦¾à¦‚à¦²à¦¾ à¦¶à¦¿à¦•à§à¦·à¦¾!</h2>
    <p class="onboarding-sub">Here's a recommended path to get started:</p>
    <ol class="onboarding-steps">
      <li><strong>Alphabet</strong> â€” Learn the Bengali script with Mixed Practice (letters first)</li>
      <li><strong>Vocabulary</strong> â€” Build your word bank with spaced repetition</li>
      <li><strong>Grammar</strong> â€” Study sentence structure once you know ~50 words</li>
    </ol>
    <p class="onboarding-tip">Tip: Try <em>Romanized</em> input mode first (Settings â†’ Fill-in-the-blank mode), then switch to Bengali script as you progress.</p>
    <button class="btn-primary onboarding-btn" data-action="dismiss-onboarding">Got it â€” let's start!</button>
  </div>
</div>

<div id="word-modal" class="word-modal">
  <div class="word-modal-inner">
    <button class="word-modal-close" data-action="close-word-modal" aria-label="Close">&#x2715;</button>
    <div class="flashcard word-modal-card" id="word-modal-card" data-action="flip-word-modal">
      <div class="flashcard-face flashcard-front">
        <div class="vocab-card-bengali" id="wm-bengali"></div>
        <div class="vocab-card-roman" id="wm-roman"></div>
      </div>
      <div class="flashcard-face flashcard-back">
        <div class="vocab-card-pos" id="wm-pos"></div>
        <div class="vocab-card-english" id="wm-english"></div>
        <div class="vocab-card-cat" id="wm-cat"></div>
        <div class="vocab-card-example" id="wm-example"></div>
        <div class="wm-related" id="wm-related" style="display:none">
          <div class="wm-related-title">Related words</div>
          <div class="wm-related-list" id="wm-related-list"></div>
        </div>
        <div class="wm-sound-row">
          <button class="card-sound-btn" data-action="speak-wm-bengali" aria-label="Play word">ğŸ”Š Word</button>
          <button class="card-sound-btn" id="wm-example-btn" data-action="speak-vocab-example" aria-label="Play example sentence">ğŸ”Š Example</button>
        </div>
      </div>
    </div>
    <p class="word-modal-hint">Tap card to flip</p>
    <button id="wm-study-btn" class="wm-study-btn" data-action="study-word-next">+ Study this word</button>
    <button id="wm-conj-btn" class="wm-conj-btn" data-action="open-verb-conjugation" style="display:none">à¦•à§à¦°à¦¿à§Ÿà¦¾ à¦°à§‚à¦ª à¦¦à§‡à¦–à§à¦¨</button>
  </div>
</div>

<!-- â”€â”€ Global Search Overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="search-overlay" class="search-overlay">
  <div class="search-panel">
    <div class="search-input-row">
      <span class="search-icon-lead">ğŸ”</span>
      <input id="search-input" class="search-input" type="search"
             placeholder="Search letters, words, grammarâ€¦"
             autocomplete="off" oninput="scheduleSearch()" />
      <button class="search-close-btn" data-action="close-search" aria-label="Close">âœ•</button>
    </div>
    <div id="search-results" class="search-results">
      <p class="search-prompt">Search across letters, vocabulary, and grammar lessons.</p>
    </div>
  </div>
</div>


<div id="achievement-toast" class="achievement-toast" role="status" aria-live="polite">
  <div class="ach-icon" id="ach-toast-icon">ğŸ¯</div>
  <div class="ach-text">
    <div class="ach-label">Achievement Unlocked</div>
    <div class="ach-name" id="ach-toast-name"></div>
  </div>
</div>

<div id="stats-overlay" class="stats-overlay">
  <div class="stats-panel">
    <div class="stats-panel-hdr">
      <h2 class="stats-panel-title">Statistics</h2>
      <button class="progress-close-btn" data-action="close-stats" aria-label="Close">âœ•</button>
    </div>
    <div class="stats-body" id="stats-body">
      <!-- rendered by renderStatsPanel() -->
    </div>
  </div>
</div>

<div id="progress-overlay" class="progress-overlay">
  <div class="progress-panel">
    <div class="progress-panel-hdr">
      <h2 class="progress-panel-title">Your Progress</h2>
      <button class="mastery-legend-btn" id="mastery-legend-btn" data-action="toggle-mastery-legend" title="What do the levels mean?">â„¹ï¸</button>
      <button class="progress-close-btn" data-action="close-progress" aria-label="Close">âœ•</button>
    </div>
    <div class="mastery-legend" id="mastery-legend" style="display:none">
      <div class="ml-item"><div class="ml-chip lvl0">à¦…</div><span class="ml-label">Unseen</span></div>
      <div class="ml-item"><div class="ml-chip lvl1">à¦…</div><span class="ml-label">Seen once</span></div>
      <div class="ml-item"><div class="ml-chip lvl2">à¦…</div><span class="ml-label">Learning</span></div>
      <div class="ml-item"><div class="ml-chip lvl3">à¦…</div><span class="ml-label">Mastered</span></div>
      <div class="ml-item"><div class="ml-chip lvl4">à¦…</div><span class="ml-label">Well-known</span></div>
      <span class="ml-label" style="font-size:0.75rem;opacity:0.7">Click any chip to cycle its level</span>
    </div>
    <div class="progress-pt-cta">
      <button class="btn-primary progress-pt-btn" data-action="progress-start-placement">
        ğŸ¯ Retake Placement Test
      </button>
      <p class="progress-pt-hint">Automatically calibrate your levels with a quiz</p>
    </div>
    <div class="progress-body" id="progress-body">
      <!-- rendered by renderProgressPanel() -->
    </div>
  </div>
</div>

<!-- BENGALI SOFT KEYBOARD -->
<div id="bng-kbd" class="bng-kbd" aria-label="Bengali keyboard">
  <div class="bng-kbd-handle" data-action="toggle-bng-kbd">à¦¬à¦¾à¦‚à¦²à¦¾ keyboard</div>
  <div class="bng-kbd-row">
    <button class="bng-key" data-action="append-char" data-char="à¦…">à¦…</button><button class="bng-key" data-action="append-char" data-char="à¦†">à¦†</button><button class="bng-key" data-action="append-char" data-char="à¦‡">à¦‡</button><button class="bng-key" data-action="append-char" data-char="à¦ˆ">à¦ˆ</button><button class="bng-key" data-action="append-char" data-char="à¦‰">à¦‰</button><button class="bng-key" data-action="append-char" data-char="à¦Š">à¦Š</button><button class="bng-key" data-action="append-char" data-char="à¦‹">à¦‹</button><button class="bng-key" data-action="append-char" data-char="à¦">à¦</button><button class="bng-key" data-action="append-char" data-char="à¦">à¦</button><button class="bng-key" data-action="append-char" data-char="à¦“">à¦“</button><button class="bng-key" data-action="append-char" data-char="à¦”">à¦”</button>
  </div>
  <div class="bng-kbd-row">
    <button class="bng-key" data-action="append-char" data-char="à¦¾" title="aa-kar">à¦¾</button><button class="bng-key" data-action="append-char" data-char="à¦¿" title="i-kar">à¦¿</button><button class="bng-key" data-action="append-char" data-char="à§€" title="ii-kar">à§€</button><button class="bng-key" data-action="append-char" data-char="à§" title="u-kar">à§</button><button class="bng-key" data-action="append-char" data-char="à§‚" title="uu-kar">à§‚</button><button class="bng-key" data-action="append-char" data-char="à§ƒ" title="ri-kar">à§ƒ</button><button class="bng-key" data-action="append-char" data-char="à§‡" title="e-kar">à§‡</button><button class="bng-key" data-action="append-char" data-char="à§ˆ" title="oi-kar">à§ˆ</button><button class="bng-key" data-action="append-char" data-char="à§‹" title="o-kar">à§‹</button><button class="bng-key" data-action="append-char" data-char="à§Œ" title="ou-kar">à§Œ</button><button class="bng-key" data-action="append-char" data-char="à§" title="hasanta">à§</button>
  </div>
  <div class="bng-kbd-row">
    <button class="bng-key" data-action="append-char" data-char="à¦•">à¦•</button><button class="bng-key" data-action="append-char" data-char="à¦–">à¦–</button><button class="bng-key" data-action="append-char" data-char="à¦—">à¦—</button><button class="bng-key" data-action="append-char" data-char="à¦˜">à¦˜</button><button class="bng-key" data-action="append-char" data-char="à¦™">à¦™</button><button class="bng-key" data-action="append-char" data-char="à¦š">à¦š</button><button class="bng-key" data-action="append-char" data-char="à¦›">à¦›</button><button class="bng-key" data-action="append-char" data-char="à¦œ">à¦œ</button><button class="bng-key" data-action="append-char" data-char="à¦">à¦</button><button class="bng-key" data-action="append-char" data-char="à¦">à¦</button>
  </div>
  <div class="bng-kbd-row">
    <button class="bng-key" data-action="append-char" data-char="à¦Ÿ">à¦Ÿ</button><button class="bng-key" data-action="append-char" data-char="à¦ ">à¦ </button><button class="bng-key" data-action="append-char" data-char="à¦¡">à¦¡</button><button class="bng-key" data-action="append-char" data-char="à¦¢">à¦¢</button><button class="bng-key" data-action="append-char" data-char="à¦£">à¦£</button><button class="bng-key" data-action="append-char" data-char="à¦¤">à¦¤</button><button class="bng-key" data-action="append-char" data-char="à¦¥">à¦¥</button><button class="bng-key" data-action="append-char" data-char="à¦¦">à¦¦</button><button class="bng-key" data-action="append-char" data-char="à¦§">à¦§</button><button class="bng-key" data-action="append-char" data-char="à¦¨">à¦¨</button>
  </div>
  <div class="bng-kbd-row">
    <button class="bng-key" data-action="append-char" data-char="à¦ª">à¦ª</button><button class="bng-key" data-action="append-char" data-char="à¦«">à¦«</button><button class="bng-key" data-action="append-char" data-char="à¦¬">à¦¬</button><button class="bng-key" data-action="append-char" data-char="à¦­">à¦­</button><button class="bng-key" data-action="append-char" data-char="à¦®">à¦®</button><button class="bng-key" data-action="append-char" data-char="à¦¯">à¦¯</button><button class="bng-key" data-action="append-char" data-char="à¦°">à¦°</button><button class="bng-key" data-action="append-char" data-char="à¦²">à¦²</button><button class="bng-key" data-action="append-char" data-char="à¦¶">à¦¶</button><button class="bng-key" data-action="append-char" data-char="à¦·">à¦·</button>
  </div>
  <div class="bng-kbd-row">
    <button class="bng-key" data-action="append-char" data-char="à¦¸">à¦¸</button><button class="bng-key" data-action="append-char" data-char="à¦¹">à¦¹</button><button class="bng-key" data-action="append-char" data-char="à¦¡à¦¼">à¦¡à¦¼</button><button class="bng-key" data-action="append-char" data-char="à¦¢à¦¼">à¦¢à¦¼</button><button class="bng-key" data-action="append-char" data-char="à¦¯à¦¼">à¦¯à¦¼</button><button class="bng-key" data-action="append-char" data-char="à§">à§</button><button class="bng-key" data-action="append-char" data-char="à¦‚">à¦‚</button><button class="bng-key" data-action="append-char" data-char="à¦ƒ">à¦ƒ</button><button class="bng-key" data-action="append-char" data-char="à¦">à¦</button><button class="bng-key" data-action="append-char" data-char="à¥¤">à¥¤</button>
  </div>
  <div class="bng-kbd-row">
    <button class="bng-key bng-key-wide" data-action="append-char" data-char="âµ">Space</button>
    <button class="bng-key bng-key-wide" data-action="append-char" data-char="âŒ«">âŒ«</button>
    <button class="bng-key bng-key-wide" data-action="append-char" data-char="âœ•">Clear</button>
  </div>
</div>

<!-- Custom modal dialog (replaces native alert/confirm) -->
<div id="app-modal" class="app-modal-overlay" style="display:none" role="dialog" aria-modal="true">
  <div class="app-modal-box">
    <p id="app-modal-msg" class="app-modal-msg"></p>
    <div class="app-modal-btns" id="app-modal-btns"></div>
  </div>
</div>

</body>
</html>
